# üåé NovaCommerce Analytics ‚Äî E-commerce Insights for Brazil

NovaCommerce ‚Äî –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ç—ã—Å—è—á–∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –ø–æ –≤—Å–µ–π –ë—Ä–∞–∑–∏–ª–∏–∏. 

–ú—ã –ø–æ–º–æ–≥–∞–µ–º –º–µ—Ä—á–∞–Ω—Ç–∞–º –≤—ã—Ö–æ–¥–∏—Ç—å –∫ –Ω–æ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º ‚Äî –ø–æ–ª—É—á–∞—Ç—å —à–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä, –±—ã—Å—Ç—Ä—É—é –¥–æ—Å—Ç–∞–≤–∫—É –∏ —É–¥–æ–±–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã.

–†–æ–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∞: —è —Ä–∞–±–æ—Ç–∞—é –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–º –≤ –∫–æ–º–∞–Ω–¥–µ Revenue & Operations. –ú–æ–∏ –∑–∞–¥–∞—á–∏:

- —Å–æ–±–∏—Ä–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–∏—Ç—Ä–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL) –ø–æ–¥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—É—é –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É;

- —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á—ë—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã (Apache Superset) –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, –∫–æ–Ω–≤–µ—Ä—Å–∏—è–º, –ª–æ–≥–∏—Å—Ç–∏–∫–µ –∏ –æ–ø–ª–∞—Ç–∞–º;

- –Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–æ—á–∫–∏ —Ä–æ—Å—Ç–∞: —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–ø–ª–∞—Ç;

- –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ ad-hoc –≤–æ–ø—Ä–æ—Å—ã –±–∏–∑–Ω–µ—Å–∞ SQL-–∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ Python-—Å–∫—Ä–∏–ø—Ç–∞–º–∏.

–í –∫–∞—á–µ—Å—Ç–≤–µ —É—á–µ–±–Ω–æ–≥–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ DWH –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–∞—Ç–∞—Å–µ—Ç Brazilian E-Commerce (Olist). –ù–∞ –Ω—ë–º —è –ø–æ–∫–∞–∑—ã–≤–∞—é –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –æ—Ç —Å—Ö–µ–º—ã –ë–î –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥–æ–≤.


## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç–µ–∫

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL 16 (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker, —Å—Ö–µ–º–∞ olist)

- –í–∏—Ç—Ä–∏–Ω—ã/SQL: schema.sql, queries.sql

- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: load_olist.py (COPY –∏–∑ CSV), post_load.sql (–¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç FK)

- BI/–¥–∞—à–±–æ—Ä–¥—ã: Apache Superset (–ø–æ –∂–µ–ª–∞–Ω–∏—é; —Å–∫—Ä–∏–Ω—à–æ—Ç –≤ docs/dashboard.png)

- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–≥—Ä—É–∑–∫–∏: main.py (Python + pandas/SQLAlchemy)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
NovaCommerce-Analytics/
‚îú‚îÄ docker-compose.yml               # Postgres (–∏, –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏, Superset/pgAdmin)
‚îú‚îÄ schema.sql                       # —Å—Ö–µ–º–∞ –ë–î —Å PK/FK
‚îú‚îÄ post_load.sql                    # –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π + –≤–∞–ª–∏–¥–∞—Ü–∏—è FK
‚îú‚îÄ load_olist.py                    # –∑–∞–≥—Ä—É–∑–∫–∞ CSV ‚Üí —Ç–∞–±–ª–∏—Ü—ã (COPY)
‚îú‚îÄ queries.sql                      # 10 —Ç–µ–º –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (SQL)
‚îú‚îÄ main.py                          # Python: –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç CSV
‚îú‚îÄ data/                            # CSV-—Ñ–∞–π–ª—ã –¥–∞—Ç–∞—Å–µ—Ç–∞ Olist
‚îÇ   ‚îú‚îÄ olist_customers_dataset.csv
‚îÇ   ‚îú‚îÄ olist_geolocation_dataset.csv
‚îÇ   ‚îú‚îÄ olist_order_items_dataset.csv
‚îÇ   ‚îú‚îÄ olist_order_payments_dataset.csv
‚îÇ   ‚îú‚îÄ olist_order_reviews_dataset.csv
‚îÇ   ‚îú‚îÄ olist_orders_dataset.csv
‚îÇ   ‚îú‚îÄ olist_products_dataset.csv
‚îÇ   ‚îú‚îÄ olist_sellers_dataset.csv
‚îÇ   ‚îî‚îÄ product_category_name_translation.csv
‚îî‚îÄ docs/
    ‚îú‚îÄ er.png                       # ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ (DBeaver/dbdiagram)
    ‚îî‚îÄ dashboard.png                # —Å–∫—Ä–∏–Ω –¥–∞—à–±–æ—Ä–¥–∞ (Superset)
```

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (Windows/PowerShell)

***–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker Desktop (WSL2) –∏ Python 3.11+. –ö–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ ‚Äì –¥–ª—è PowerShell.***

### 1) –ü–æ–¥–Ω—è—Ç—å PostgreSQL –≤ Docker
```bash
docker compose up -d
docker ps       
```
***schema.sql –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ (—á–∏—Å—Ç—ã–π volume).***

### 2) –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

```bash
pip install psycopg2-binary

python .\load_olist.py --host 127.0.0.1 --port 5433 --db e-commercedb --user postgres --password secret --data-dir .\data --truncate
```

****–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏: [OK] customers: 99441 rows, ‚Ä¶, [OK] order_items: 112650 rows –∏ —Ç.–¥.****

### 3) –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥acja FK

***–ò–Ω–æ–≥–¥–∞ –≤ CSV –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ –ø–µ—Ä–µ–≤–æ–¥–µ. –°–∫—Ä–∏–ø—Ç post_load.sql –¥–æ–±–∞–≤–∏—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á:***

```bash
type .\post_load.sql | docker exec -i olist_pg psql -U postgres -d e-commercedb
```

### 4) –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ pgAdmin/psql

pgAdmin:

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: 
- Host 127.0.0.1
- Port 5433 
- DB e-commercedb 
- User postgres 
- Pass secret

***–ù–∞–π–¥–∏ Schemas ‚Üí olist ‚Üí Tables, –æ—Ç–∫—Ä–æ–π –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ View/Edit Data.***

psql —á–µ—Ä–µ–∑ docker:
```bash
docker exec -it olist_pg psql -U postgres -d e-commercedb
\dt olist.*
SELECT COUNT(*) FROM olist.orders;
\q
```

### 5) –í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑–æ–≤—ã–µ SQL –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ –∑–∞–¥–∞–Ω–∏—é:

```bash
-- LIMIT 10
SELECT * FROM olist.orders LIMIT 10;

-- WHERE + ORDER BY
SELECT order_id, order_status, order_purchase_timestamp
FROM olist.orders
WHERE order_status IN ('delivered','shipped')
ORDER BY order_purchase_timestamp DESC
LIMIT 10;

-- GROUP BY + COUNT/AVG/MIN/MAX
SELECT payment_type,
       COUNT(*) AS cnt,
       ROUND(AVG(payment_value),2) AS avg_payment,
       ROUND(MIN(payment_value),2) AS min_payment,
       ROUND(MAX(payment_value),2) AS max_payment
FROM olist.order_payments
GROUP BY payment_type
ORDER BY cnt DESC;

-- JOIN (orders + customers + order_items)
SELECT o.order_id, c.customer_state, ROUND(SUM(oi.price),2) AS order_sum
FROM olist.orders o
JOIN olist.customers c ON c.customer_id = o.customer_id
JOIN olist.order_items oi ON oi.order_id = o.order_id
GROUP BY o.order_id, c.customer_state
ORDER BY order_sum DESC
LIMIT 10;
```
### 6) Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—ã–≥—Ä—É–∑–æ–∫
```bash
pip install pandas SQLAlchemy psycopg2-binary
python .\main.py
```

***–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç 2‚Äì3 –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞, –≤—ã–≤–µ–¥–µ—Ç –ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç CSV —Ä—è–¥–æ–º (top_categories_revenue.csv, payment_types_share.csv, ‚Ä¶).***

---

***Student - Kuandyk Zhanel.***

***Group - IT-2303.***